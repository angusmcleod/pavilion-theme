<script type="text/discourse-plugin" version="0.8">
  const computed = require('ember-addons/ember-computed-decorators').default;
  const setDefaultHomepage = require("discourse/lib/utilities").setDefaultHomepage;

  api.modifyClass('controller:preferences/interface', {
    @computed()
    userSelectableHome() {
      let core = this._super();
      core.push({ name: "Home", value: 102 })
      return core;
    },
    
    homeChanged() {
      const homepageId = this.get("model.user_option.homepage_id");
      if (homepageId === 102) {
        setDefaultHomepage("home");
      } else {
        this._super();
      }
    }
  });
</script>
